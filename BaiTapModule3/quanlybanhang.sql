CREATE DATABASE baitap_quanlybanhang;

USE baitap_quanlybanhang;

CREATE TABLE KHACHHANG (
	MAKH CHAR(4) PRIMARY KEY,
    HOTEN VARCHAR(40) NOT NULL,
    DCHI VARCHAR(50) NOT NULL,
    SODT VARCHAR(20) NOT NULL UNIQUE,
    NGSINH DATE NOT NULL,
    NGDK DATE NOT NULL,
    DOANHSO DOUBLE DEFAULT NULL
);

CREATE TABLE NHANVIEN(
	MANV CHAR(4) PRIMARY KEY,
    HOTEN VARCHAR(40) NOT NULL,
    SODT VARCHAR(20) NOT NULL UNIQUE,
    NGVL DATE NOT NULL
);

CREATE TABLE SANPHAM(
	MASP CHAR(4) PRIMARY KEY,
    TENSP VARCHAR(40) NOT NULL,
    DVT VARCHAR(20) NOT NULL,
    NUOCSX VARCHAR(40),
    GIA DOUBLE NOT NULL
);

CREATE TABLE HOADON(
	SOHD INT AUTO_INCREMENT PRIMARY KEY,
    NGHD DATETIME DEFAULT NULL,
    MAKH CHAR(4) NOT NULL,
    MANV CHAR(4) NOT NULL,
    TRIGIA DOUBLE DEFAULT NULL,
    FOREIGN KEY (MAKH) REFERENCES KHACHHANG(MAKH),
    FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV)
);

CREATE TABLE CTHD(
	SOHD INT NOT NULL,
    MASP CHAR(4) NOT NULL,
    SL INT NOT NULL CHECK (SL >0)
);


INSERT INTO NHANVIEN(MANV, HOTEN, DTHOAI, NGVL) 
VALUE 
("NV01", "Ly Thanh Tung", "0987654321", "2022-09-22"),
("NV02", "Le Thi Phi Yen", "0123456789", "2021-08-21"),
("NV03", "Nguyen Van B", "0987654322", "2020-07-22"),
("NV04", "Ngo Thanh Tuan", "0987123123", "2022-08-22"),
("NV05", "Nguyen Thi Truc Thanh", "0987123124", "2022-07-22");

INSERT INTO KHACHANG(MAKH, HOTEN, DCHI, SODT, NGSINH, DOANHSO, NGGN)
VALUE 
("KH01", "Nguyen Van A", "731 Tran Hung Dao, Q5, TpHCM", "0987987987", "1960-10-22", 13060000, "2006-07-22"),
("KH02", "Tran Ngoc Han", "23/5 Nguyen Trai, Q5, TpHCM", "0987987988", "1974-04-03", 280000, "2006-07-30"),
("KH03", "Tran Ngoc Linh", "45 Nguyen Canh Chan, Q1, TpHCM", "0987987989", "1980-06-12", 3860000, "2006-08-05"),
("KH04", "Tran Minh Long", "50/34 Le Dai Hanh, Q10, TpHCM", "0987987910", "1965-03-09", 250000, "2006-10-02"),
("KH05", "Le Nhat Minh", "34 Truong Dinh, Q3, TpHCM", "0987987911", "1950-03-10", 21000, "2006-10-28"),
("KH06", "Le Hoai Thuong", "227 Nguyen Van Cu, Q5, TpHCM", "0987987912", "1981-12-31", 915000, "2006-11-24"),
("KH07", "Nguyen Van Tam", "32/3 Tran Binh Trong, Q5, TpHCM", "0987987913", "1971-04-06", 12500, "2006-12-01"),
("KH08", "Phan Thi Thanh", "45/2 An Duong Vuong, Q5, TpHCM", "0987987914", "1971-01-10", 365000, "2006-12-13"),
("KH09", "Le Ha Vinh", "873 Le Hong Phong, Q5, TpHCM", "0987987915", "1979-09-03", 70000, "2006-01-14"),
("KH10", "Ha Duy Lap", "34/34B Nguyen Trai, Q1, TpHCM", "0987987916", "1983-05-02", 67500, "2006-01-16");


